{"ast":null,"code":"import { DepthTexture, DepthFormat, UnsignedShortType } from 'three';\nimport * as React from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { useFBO } from './useFBO.js';\nfunction useDepthBuffer() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref$size = _ref.size,\n    size = _ref$size === void 0 ? 256 : _ref$size,\n    _ref$frames = _ref.frames,\n    frames = _ref$frames === void 0 ? Infinity : _ref$frames;\n  var dpr = useThree(function (state) {\n    return state.viewport.dpr;\n  });\n  var _useThree = useThree(function (state) {\n      return state.size;\n    }),\n    width = _useThree.width,\n    height = _useThree.height;\n  var w = size || width * dpr;\n  var h = size || height * dpr;\n  var depthConfig = React.useMemo(function () {\n    var depthTexture = new DepthTexture(w, h);\n    depthTexture.format = DepthFormat;\n    depthTexture.type = UnsignedShortType;\n    return {\n      depthTexture: depthTexture\n    };\n  }, [w, h]);\n  var count = 0;\n  var depthFBO = useFBO(w, h, depthConfig);\n  useFrame(function (state) {\n    if (frames === Infinity || count < frames) {\n      state.gl.setRenderTarget(depthFBO);\n      state.gl.render(state.scene, state.camera);\n      state.gl.setRenderTarget(null);\n      count++;\n    }\n  });\n  return depthFBO.depthTexture;\n}\nexport { useDepthBuffer };","map":null,"metadata":{},"sourceType":"module"}