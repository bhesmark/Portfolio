{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/baic/Documents/programm/gsrlic/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _createClass from \"/Users/baic/Documents/programm/gsrlic/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"/Users/baic/Documents/programm/gsrlic/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _assertThisInitialized from \"/Users/baic/Documents/programm/gsrlic/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/baic/Documents/programm/gsrlic/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/baic/Documents/programm/gsrlic/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _wrapNativeSuper from \"/Users/baic/Documents/programm/gsrlic/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _slicedToArray from \"/Users/baic/Documents/programm/gsrlic/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction e(e, t, n, r) {\n  return new (n || (n = Promise))(function (o, a) {\n    function i(e) {\n      try {\n        d(r.next(e));\n      } catch (e) {\n        a(e);\n      }\n    }\n    function c(e) {\n      try {\n        d(r[\"throw\"](e));\n      } catch (e) {\n        a(e);\n      }\n    }\n    function d(e) {\n      var t;\n      e.done ? o(e.value) : (t = e.value, t instanceof n ? t : new n(function (e) {\n        e(t);\n      })).then(i, c);\n    }\n    d((r = r.apply(e, t || [])).next());\n  });\n}\nvar t = [\"geforce 320m\", \"geforce 8600\", \"geforce 8600m gt\", \"geforce 8800 gs\", \"geforce 8800 gt\", \"geforce 9400\", \"geforce 9400m g\", \"geforce 9400m\", \"geforce 9600m gt\", \"geforce 9600m\", \"geforce fx go5200\", \"geforce gt 120\", \"geforce gt 130\", \"geforce gt 330m\", \"geforce gtx 285\", \"google swiftshader\", \"intel g41\", \"intel g45\", \"intel gma 4500mhd\", \"intel gma x3100\", \"intel hd 3000\", \"intel q45\", \"legacy\", \"mali-2\", \"mali-3\", \"mali-4\", \"quadro fx 1500\", \"quadro fx 4\", \"quadro fx 5\", \"radeon hd 2400\", \"radeon hd 2600\", \"radeon hd 4670\", \"radeon hd 4850\", \"radeon hd 4870\", \"radeon hd 5670\", \"radeon hd 5750\", \"radeon hd 6290\", \"radeon hd 6300\", \"radeon hd 6310\", \"radeon hd 6320\", \"radeon hd 6490m\", \"radeon hd 6630m\", \"radeon hd 6750m\", \"radeon hd 6770m\", \"radeon hd 6970m\", \"sgx 543\", \"sgx543\"];\nfunction n(e) {\n  return e = e.toLowerCase().replace(/.*angle ?\\((.+)\\)(?: on vulkan [0-9.]+)?$/i, \"$1\").replace(/\\s(\\d{1,2}gb|direct3d.+$)|\\(r\\)| \\([^)]+\\)$/g, \"\").replace(/(?:vulkan|opengl) \\d+\\.\\d+(?:\\.\\d+)?(?: \\((.*)\\))?/, \"$1\");\n}\nvar r = \"undefined\" == typeof window,\n  o = function () {\n    if (r) return;\n    var _window$navigator = window.navigator,\n      e = _window$navigator.userAgent,\n      t = _window$navigator.platform,\n      n = _window$navigator.maxTouchPoints,\n      o = /(iphone|ipod|ipad)/i.test(e),\n      a = \"iPad\" === t || \"MacIntel\" === t && n > 0 && !window.MSStream;\n    return {\n      isIpad: a,\n      isMobile: /android/i.test(e) || o || a,\n      isSafari12: /Version\\/12.+Safari/.test(e)\n    };\n  }();\nfunction a(e, t, n) {\n  if (!n) return [t];\n  var r = function (e) {\n      var t = \"\\n    precision highp float;\\n    attribute vec3 aPosition;\\n    varying float vvv;\\n    void main() {\\n      vvv = 0.31622776601683794;\\n      gl_Position = vec4(aPosition, 1.0);\\n    }\\n  \",\n        n = \"\\n    precision highp float;\\n    varying float vvv;\\n    void main() {\\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\\n      enc = fract(enc);\\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\\n      gl_FragColor = enc;\\n    }\\n  \",\n        r = e.createShader(35633),\n        o = e.createShader(35632),\n        a = e.createProgram();\n      if (!(o && r && a)) return;\n      e.shaderSource(r, t), e.shaderSource(o, n), e.compileShader(r), e.compileShader(o), e.attachShader(a, r), e.attachShader(a, o), e.linkProgram(a), e.detachShader(a, r), e.detachShader(a, o), e.deleteShader(r), e.deleteShader(o), e.useProgram(a);\n      var i = e.createBuffer();\n      e.bindBuffer(34962, i), e.bufferData(34962, new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]), 35044);\n      var c = e.getAttribLocation(a, \"aPosition\");\n      e.vertexAttribPointer(c, 3, 5126, !1, 0, 0), e.enableVertexAttribArray(c), e.clearColor(1, 1, 1, 1), e.clear(16384), e.viewport(0, 0, 1, 1), e.drawArrays(4, 0, 3);\n      var d = new Uint8Array(4);\n      return e.readPixels(0, 0, 1, 1, 6408, 5121, d), e.deleteProgram(a), e.deleteBuffer(i), d.join(\"\");\n    }(e),\n    a = \"801621810\",\n    i = \"8016218135\",\n    c = \"80162181161\",\n    d = (null == o ? void 0 : o.isIpad) ? [[\"a7\", c, 12], [\"a8\", i, 15], [\"a8x\", i, 15], [\"a9\", i, 15], [\"a9x\", i, 15], [\"a10\", i, 15], [\"a10x\", i, 15], [\"a12\", a, 15], [\"a12x\", a, 15], [\"a12z\", a, 15], [\"a14\", a, 15], [\"m1\", a, 15]] : [[\"a7\", c, 12], [\"a8\", i, 12], [\"a9\", i, 15], [\"a10\", i, 15], [\"a11\", a, 15], [\"a12\", a, 15], [\"a13\", a, 15], [\"a14\", a, 15]];\n  var l;\n  \"80162181255\" === r ? l = d.filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 3),\n      e = _ref2[2];\n    return e >= 14;\n  }) : (l = d.filter(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n      e = _ref4[1];\n    return e === r;\n  }), l.length || (l = d));\n  return l.map(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 1),\n      e = _ref6[0];\n    return \"apple \".concat(e, \" gpu\");\n  });\n}\nvar i = /*#__PURE__*/function (_Error) {\n  _inherits(i, _Error);\n  var _super = _createSuper(i);\n  function i(e) {\n    var _this;\n    _classCallCheck(this, i);\n    _this = _super.call(this, e), Object.setPrototypeOf(_assertThisInitialized(_this), (this instanceof i ? this.constructor : void 0).prototype);\n    return _this;\n  }\n  return _createClass(i);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar c = [],\n  d = [];\nfunction l(e, t) {\n  if (e === t) return 0;\n  var n = e;\n  e.length > t.length && (e = t, t = n);\n  var r = e.length,\n    o = t.length;\n  for (; r > 0 && e.charCodeAt(~-r) === t.charCodeAt(~-o);) {\n    r--, o--;\n  }\n  var a,\n    i = 0;\n  for (; i < r && e.charCodeAt(i) === t.charCodeAt(i);) {\n    i++;\n  }\n  if (r -= i, o -= i, 0 === r) return o;\n  var l,\n    s,\n    f = 0,\n    u = 0,\n    h = 0;\n  for (; u < r;) {\n    d[u] = e.charCodeAt(i + u), c[u] = ++u;\n  }\n  for (; h < o;) {\n    for (a = t.charCodeAt(i + h), l = h++, f = h, u = 0; u < r; u++) {\n      s = a === d[u] ? l : l + 1, l = c[u], f = c[u] = l > f ? s > f ? f + 1 : s : s > l ? l + 1 : s;\n    }\n  }\n  return f;\n}\nfunction s(e) {\n  return null != e;\n}\nvar f = function f() {\n  var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    _ref7$mobileTiers = _ref7.mobileTiers,\n    c = _ref7$mobileTiers === void 0 ? [0, 15, 30, 60] : _ref7$mobileTiers,\n    _ref7$desktopTiers = _ref7.desktopTiers,\n    d = _ref7$desktopTiers === void 0 ? [0, 15, 30, 60] : _ref7$desktopTiers,\n    _ref7$override = _ref7.override,\n    f = _ref7$override === void 0 ? {} : _ref7$override,\n    u = _ref7.glContext,\n    _ref7$failIfMajorPerf = _ref7.failIfMajorPerformanceCaveat,\n    h = _ref7$failIfMajorPerf === void 0 ? !1 : _ref7$failIfMajorPerf,\n    _ref7$benchmarksURL = _ref7.benchmarksURL,\n    g = _ref7$benchmarksURL === void 0 ? \"https://unpkg.com/detect-gpu@5.0.1/dist/benchmarks\" : _ref7$benchmarksURL;\n  return e(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var p, _f$isIpad, m, _f$isMobile, v, _f$screenSize, w, _f$loadBenchmarks, x, A, P, b, S, _e, _t, y, _e4, _y$, C, E, L, M, $, _e5;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            p = {};\n            if (!r) {\n              _context3.next = 3;\n              break;\n            }\n            return _context3.abrupt(\"return\", {\n              tier: 0,\n              type: \"SSR\"\n            });\n          case 3:\n            _f$isIpad = f.isIpad, m = _f$isIpad === void 0 ? !!(null == o ? void 0 : o.isIpad) : _f$isIpad, _f$isMobile = f.isMobile, v = _f$isMobile === void 0 ? !!(null == o ? void 0 : o.isMobile) : _f$isMobile, _f$screenSize = f.screenSize, w = _f$screenSize === void 0 ? window.screen : _f$screenSize, _f$loadBenchmarks = f.loadBenchmarks, x = _f$loadBenchmarks === void 0 ? function (t) {\n              return e(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n                var e;\n                return _regeneratorRuntime().wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return fetch(\"\".concat(g, \"/\").concat(t)).then(function (e) {\n                          return e.json();\n                        });\n                      case 2:\n                        e = _context.sent;\n                        if (!(parseInt(e.shift().split(\".\")[0], 10) < 4)) {\n                          _context.next = 5;\n                          break;\n                        }\n                        throw new i(\"Detect GPU benchmark data is out of date. Please update to version 4x\");\n                      case 5:\n                        return _context.abrupt(\"return\", e);\n                      case 6:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n            } : _f$loadBenchmarks;\n            A = f.renderer;\n            P = function P(e, t, n, r, o) {\n              return {\n                device: o,\n                fps: r,\n                gpu: n,\n                isMobile: v,\n                tier: e,\n                type: t\n              };\n            };\n            S = \"\";\n            if (!A) {\n              _context3.next = 11;\n              break;\n            }\n            A = n(A), b = [A];\n            _context3.next = 18;\n            break;\n          case 11:\n            _e = u || function (e) {\n              var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n              var n = {\n                alpha: !1,\n                antialias: !1,\n                depth: !1,\n                failIfMajorPerformanceCaveat: t,\n                powerPreference: \"high-performance\",\n                stencil: !1\n              };\n              e && delete n.powerPreference;\n              var r = window.document.createElement(\"canvas\"),\n                o = r.getContext(\"webgl\", n) || r.getContext(\"experimental-webgl\", n);\n              return null != o ? o : void 0;\n            }(null == o ? void 0 : o.isSafari12, h);\n            if (_e) {\n              _context3.next = 14;\n              break;\n            }\n            return _context3.abrupt(\"return\", P(0, \"WEBGL_UNSUPPORTED\"));\n          case 14:\n            _t = _e.getExtension(\"WEBGL_debug_renderer_info\");\n            if (!(_t && (A = _e.getParameter(_t.UNMASKED_RENDERER_WEBGL)), !A)) {\n              _context3.next = 17;\n              break;\n            }\n            return _context3.abrupt(\"return\", P(1, \"FALLBACK\"));\n          case 17:\n            S = A, A = n(A), b = function (e, t, n) {\n              return \"apple gpu\" === t ? a(e, t, n) : [t];\n            }(_e, A, v);\n          case 18:\n            _context3.next = 20;\n            return Promise.all(b.map(function (t) {\n              var n;\n              return e(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n                var e, r, o, a, c, d, s, f, u, _ref12, _ref13, h, g, A, _window, P, b, _iterator, _step, _e2, _e3, _t3, _n2, _r, _o, _u, _u2, S, y;\n                return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        e = function (e) {\n                          var t = v ? [\"adreno\", \"apple\", \"mali-t\", \"mali\", \"nvidia\", \"powervr\", \"samsung\"] : [\"intel\", \"apple\", \"amd\", \"radeon\", \"nvidia\", \"geforce\"];\n                          for (var _i = 0, _t2 = t; _i < _t2.length; _i++) {\n                            var _n = _t2[_i];\n                            if (e.includes(_n)) return _n;\n                          }\n                        }(t);\n                        if (e) {\n                          _context2.next = 3;\n                          break;\n                        }\n                        return _context2.abrupt(\"return\");\n                      case 3:\n                        r = \"\".concat(v ? \"m\" : \"d\", \"-\").concat(e).concat(m ? \"-ipad\" : \"\", \".json\"), o = p[r] = null !== (n = p[r]) && void 0 !== n ? n : x(r);\n                        _context2.prev = 4;\n                        _context2.next = 7;\n                        return o;\n                      case 7:\n                        a = _context2.sent;\n                        _context2.next = 15;\n                        break;\n                      case 10:\n                        _context2.prev = 10;\n                        _context2.t0 = _context2[\"catch\"](4);\n                        if (!(_context2.t0 instanceof i)) {\n                          _context2.next = 14;\n                          break;\n                        }\n                        throw _context2.t0;\n                      case 14:\n                        return _context2.abrupt(\"return\");\n                      case 15:\n                        c = function (e) {\n                          var t;\n                          var n = (e = e.replace(/\\([^)]+\\)/, \"\")).match(/\\d+/) || e.match(/(\\W|^)([A-Za-z]{1,3})(\\W|$)/g);\n                          return null !== (t = null == n ? void 0 : n.join(\"\").replace(/\\W|amd/g, \"\")) && void 0 !== t ? t : \"\";\n                        }(t);\n                        d = a.filter(function (_ref8) {\n                          var _ref9 = _slicedToArray(_ref8, 2),\n                            e = _ref9[1];\n                          return e === c;\n                        });\n                        d.length || (d = a.filter(function (_ref10) {\n                          var _ref11 = _slicedToArray(_ref10, 1),\n                            e = _ref11[0];\n                          return e.includes(t);\n                        }));\n                        s = d.length;\n                        if (!(0 === s)) {\n                          _context2.next = 21;\n                          break;\n                        }\n                        return _context2.abrupt(\"return\");\n                      case 21:\n                        f = t.split(/[.,()\\[\\]/\\s]/g).sort().filter(function (e, t, n) {\n                          return 0 === t || e !== n[t - 1];\n                        }).join(\" \");\n                        _ref12 = s > 1 ? d.map(function (e) {\n                          return [e, l(f, e[2])];\n                        }).sort(function (_ref14, _ref15) {\n                          var _ref16 = _slicedToArray(_ref14, 2),\n                            e = _ref16[1];\n                          var _ref17 = _slicedToArray(_ref15, 2),\n                            t = _ref17[1];\n                          return e - t;\n                        })[0][0] : d[0], _ref13 = _slicedToArray(_ref12, 5), h = _ref13[0], g = _ref13[4], A = Number.MAX_VALUE;\n                        _window = window, P = _window.devicePixelRatio, b = w.width * P * w.height * P;\n                        _iterator = _createForOfIteratorHelper(g);\n                        try {\n                          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                            _e2 = _step.value;\n                            _e3 = _slicedToArray(_e2, 2), _t3 = _e3[0], _n2 = _e3[1], _r = _t3 * _n2, _o = Math.abs(b - _r);\n                            _o < A && (A = _o, u = _e2);\n                          }\n                        } catch (err) {\n                          _iterator.e(err);\n                        } finally {\n                          _iterator.f();\n                        }\n                        if (u) {\n                          _context2.next = 28;\n                          break;\n                        }\n                        return _context2.abrupt(\"return\");\n                      case 28:\n                        _u = u, _u2 = _slicedToArray(_u, 4), S = _u2[2], y = _u2[3];\n                        return _context2.abrupt(\"return\", [A, S, h, y]);\n                      case 30:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, null, [[4, 10]]);\n              }));\n            }));\n          case 20:\n            y = _context3.sent.filter(s).sort(function (_ref18, _ref19) {\n              var _ref20 = _slicedToArray(_ref18, 2),\n                _ref20$ = _ref20[0],\n                e = _ref20$ === void 0 ? Number.MAX_VALUE : _ref20$,\n                t = _ref20[1];\n              var _ref21 = _slicedToArray(_ref19, 2),\n                _ref21$ = _ref21[0],\n                n = _ref21$ === void 0 ? Number.MAX_VALUE : _ref21$,\n                r = _ref21[1];\n              return e === n ? t - r : e - n;\n            });\n            if (y.length) {\n              _context3.next = 24;\n              break;\n            }\n            _e4 = t.find(function (e) {\n              return A.includes(e);\n            });\n            return _context3.abrupt(\"return\", _e4 ? P(0, \"BLOCKLISTED\", _e4) : P(1, \"FALLBACK\", \"\".concat(A, \" (\").concat(S, \")\")));\n          case 24:\n            _y$ = _slicedToArray(y[0], 4), C = _y$[1], E = _y$[2], L = _y$[3];\n            if (!(-1 === C)) {\n              _context3.next = 27;\n              break;\n            }\n            return _context3.abrupt(\"return\", P(0, \"BLOCKLISTED\", E, C, L));\n          case 27:\n            M = v ? c : d;\n            $ = 0;\n            for (_e5 = 0; _e5 < M.length; _e5++) {\n              C >= M[_e5] && ($ = _e5);\n            }\n            return _context3.abrupt(\"return\", P($, \"BENCHMARK\", E, C, L));\n          case 31:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n};\nexport { f as getGPUTier };","map":null,"metadata":{},"sourceType":"module"}